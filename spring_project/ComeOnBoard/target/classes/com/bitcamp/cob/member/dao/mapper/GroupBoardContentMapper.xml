<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<!-- 매퍼의 네임스페이스는 식별자(구분용. 보통 패키지 이름을 쓴다) -->
<mapper namespace="com.bitcamp.cob.group.dao.GroupDao">

	<!-- gamegroup1을 나중에 gamegroup으로 수정해야함(외래키 설정 때문에) -->
	
	
	<insert id="insertGroupBoardContent" 
		parameterType="com.bitcamp.cob.group.domain.Group"
		useGeneratedKeys="true"
		keyProperty="grpIdx">
	<!-- grpDate는 MySQL에서 default값으로 current_timestamp(yyyy-mm-dd hh:mm:ss) 설정을 했기 때문에 포함하지 않았습니다. -->
	<!-- groupList에서 출력시에는 jstl에서 패턴 사용(op-list.jsp에서 참고하기). -> Date형식(yyyy-mm-dd)으로 출력 -->
		insert into gamegroup1 ( grpPostEndDate, grpDate, grpContent, grpMaxMem, grpTitle, loc, genre)
		values ( #{grpPostEndDate}, #{grpDate}, #{grpContent}, #{grpMaxMem}, #{grpTitle}, #{loc}, #{genre})
	</insert>


	<select id="selectGroupBoardContent"
		resultType="com.bitcamp.cob.group.domain.Group">
		select grpPostEndDate, grpDate, grpContent, grpMaxMem, grpTitle, loc, genre
		from gamegroup1
		where grpIdx=#{grpIdx} <!-- 매개변수에 grpIdx를 전달해줘야 처리가 가능하다!! -->
		order by grpDate
	</select>
	
	
	<!-- insert into gamegroup1 ( grpPostEndDate, grpDate, grpContent, grpMaxMem, grpTitle, loc, genre) -->
	<update id="updateGroupBoardContent" 
		parameterType="com.bitcamp.cob.group.domain.Group">
		update gamegroup1
		set grpPostEndDate=#{grpPostEndDate}, grpDate=#{grpDate}, grpContent=#{grpContent}, 
			grpMaxMem=#{grpMaxMem}, grpTitle=#{grpTitle}, loc=#{loc}, genre=#{genre}
		where grpIdx=#{grpIdx}
	</update>
	
	
	<delete id="deleteGroupBoardContent">
		delete from gamegroup1 where memIdx=4
	</delete>

	
	<select id="reSelectContent"
		resultType="com.bitcamp.cob.group.domain.Group">
		select grpPostEndDate, grpDate, grpContent, grpMaxMem, grpTitle, loc, genre
		from gamegroup1
		where grpIdx=#{grpIdx}
	</select>


</mapper>